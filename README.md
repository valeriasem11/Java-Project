# Проект Forbes - Анализ данных о миллиардерах

## Информация о проекте

**Студент:** Вариант 9  
**Название таблицы:** Forbes  
**Дата выполнения:** Октябрь 2025

---

## Описание проекта

Данный проект представляет собой Java-приложение для анализа данных о миллиардерах из списка Forbes. Приложение выполняет следующие задачи:

1. **Задание 1:** Построение графика общего капитала участников Forbes, объединив их по странам
2. **Задание 2:** Поиск самого молодого миллиардера из Франции с капиталом > 10 млрд $
3. **Задание 3:** Поиск имени и компании бизнесмена из США с самым большим капиталом в сфере Energy

---

##  Структура проекта
```
Forbes/
├── src/
│   ├── Main.java           # Главный класс приложения
│   ├── Forbes.java         # Модель данных миллиардера
│   ├── SQL.java            # Класс для работы с БД
│   └── Chart.java          # Класс для построения графиков
├── libraries/              # Внешние библиотеки (JAR файлы)
│   ├── sqlite-jdbc.jar
│   ├── jfreechart.jar
│   └── jcommon.jar
├── Forbes.csv             # Исходные данные
├── forbes.db              # База данных SQLite (создается автоматически)
└── README.md              # Документация проекта
```

---

## Классы проекта

### 1️**Main.java**
**Назначение:** Главный класс приложения, точка входа программы.

**Функционал:**
- Чтение и парсинг CSV-файла `Forbes.csv`
- Создание списка объектов `Forbes`
- Подключение к базе данных SQLite (`forbes.db`)
- Создание и заполнение таблицы `ForbesTable`
- Выполнение всех трех заданий:
    - Построение графика (Задание 1)
    - Вывод самого молодого миллиардера из Франции (Задание 2)
    - Вывод топ-бизнесмена из США в Energy (Задание 3)
- Форматированный вывод результатов в консоль

**Особенности:**
- Корректная обработка данных с удалением лишних пробелов и символов `\r`
- Обработка ошибок парсинга
- Красивый форматированный вывод результатов

---

### **Forbes.java**
**Назначение:** Класс-модель для хранения данных о миллиардере.

**Поля:**
- `int rank` - позиция в рейтинге Forbes
- `String name` - имя миллиардера
- `Double networth` - капитал в млрд $
- `int age` - возраст
- `String country` - страна
- `String source` - источник богатства (компания)
- `String industry` - индустрия/сфера деятельности

**Методы:**
- Конструктор с автоматической очисткой данных от лишних пробелов и символов
- Геттеры для всех полей
- `toString()` для удобного вывода информации об объекте

---

### **SQL.java**
**Назначение:** Класс для работы с базой данных SQLite.

**Методы:**

| Метод | Описание |
|-------|----------|
| `connection()` | Установка соединения с БД |
| `CreateTable()` | Создание таблицы `ForbesTable` |
| `WriteTable()` | Заполнение таблицы данными из списка объектов |
| `GetCountries()` | Получение топ-10 стран для графика |
| `GetTotalNetworthByCountry()` | Получение общего капитала по странам |
| `YoungestFrenchBillionaire()` | **Задание 2:** Самый молодой миллиардер из Франции |
| `TopUSEnergyBillionaire()` | **Задание 3:** Топ-бизнесмен из США в Energy |
| `CheckEnergyData()` | Вспомогательный метод для проверки данных |

**SQL-запросы:**
- Используются `PreparedStatement` для безопасности
- Применяется `TRIM()` для корректной обработки данных
- Сортировка и группировка данных

---

### **Chart.java**
**Назначение:** Класс для создания и отображения графиков.

**Функционал:**
- Использует библиотеку **JFreeChart**
- Создает столбчатую диаграмму (Bar Chart)
- Отображает топ-10 стран по общему капиталу миллиардеров
- Настраиваемый размер окна (1200x800)

**Параметры графика:**
- Заголовок: "Общий капитал миллиардеров Forbes по странам (топ-10)"
- Ось X: Страны
- Ось Y: Общий капитал в млрд $

---

## Структура базы данных

### Таблица: **ForbesTable**

| Поле | Тип | Описание |
|------|-----|----------|
| Rank | INT | Позиция в рейтинге Forbes |
| Name | TEXT | Имя миллиардера |
| Networth | REAL | Капитал в млрд $ |
| Age | INT | Возраст |
| Country | TEXT | Страна |
| Source | TEXT | Источник богатства (компания) |
| Industry | TEXT | Индустрия/сфера деятельности |

**Примечание:** База данных создается автоматически при первом запуске программы.

---

## Требования и установка
### Необходимые библиотеки:

1. **sqlite-jdbc** (версия 3.x или выше)
    - Для работы с базой данных SQLite
    - Скачать: https://github.com/xerial/sqlite-jdbc

2. **jfreechart** (версия 1.5.x)
    - Для построения графиков
    - Скачать: https://sourceforge.net/projects/jfreechart/

3. **jcommon** (версия 1.0.x)
    - Зависимость для jfreechart
    - Обычно идет в комплекте с jfreechart

### Установка в IntelliJ IDEA:

1. Создайте новый Java проект с именем `Forbes`
2. Создайте папку `src` и добавьте туда все `.java` файлы
3. Создайте папку `libraries` в корне проекта
4. Скачайте и поместите JAR-файлы библиотек в папку `libraries`
5. Добавьте библиотеки в проект:
    - `File` → `Project Structure` → `Libraries` → `+` → `Java`
    - Выберите все JAR-файлы из папки `libraries`
6. Поместите файл `Forbes.csv` в корень проекта (на том же уровне, что и `src`)
7. Запустите `Main.java`

---

## Запуск проекта

### Шаг 1: Подготовка данных
Убедитесь, что файл `Forbes.csv` находится в корневой директории проекта.

### Шаг 2: Запуск
Запустите класс `Main.java`. Программа выполнит следующее:
1. Прочитает данные из CSV
2. Создаст базу данных `forbes.db`
3. Заполнит таблицу данными
4. Выполнит все три задания
5. Отобразит график
6. Выведет результаты в консоль

---

## SQL-запросы

### Создание таблицы
```sql
CREATE TABLE if not exists ForbesTable (
    'Rank' INT,
    'Name' TEXT,
    'Networth' REAL,
    'Age' INT,
    'Country' TEXT,
    'Source' TEXT,
    'Industry' TEXT
);
```

### Задание 1: Топ-10 стран по общему капиталу
```sql
SELECT Country, SUM(Networth) AS Total_Networth
FROM ForbesTable
GROUP BY Country
ORDER BY Total_Networth DESC
LIMIT 10;
```

### Задание 2: Самый молодой миллиардер из Франции (капитал > 10 млрд)
```sql
SELECT Name, Age, Networth, Country
FROM ForbesTable
WHERE Country = 'France' AND Networth > 10
ORDER BY Age ASC
LIMIT 1;
```

### Задание 3: Топ-бизнесмен из США в Energy
```sql
SELECT Name, Source, Networth, Industry, Country
FROM ForbesTable
WHERE TRIM(Country) = 'United States' AND TRIM(Industry) = 'Energy'
ORDER BY Networth DESC
LIMIT 1;
```

---

## Результаты выполнения

### Задание 1: График общего капитала по странам

**Топ-10 стран по общему капиталу:**
1. United States - XXXX.XX млрд $
2. China - XXXX.XX млрд $
3. India - XXXX.XX млрд $
   ... и т.д.

*График отображается в отдельном окне*

---

### Задание 2: Самый молодой миллиардер из Франции

**Результат:**
- **Имя:** [Имя миллиардера]
- **Возраст:** XX лет
- **Капитал:** XX.X млрд $
- **Страна:** France

---

### Задание 3: Топ-бизнесмен из США в Energy

**Результат:**
- **Имя:** Harold Hamm & family
- **Компания:** oil & gas
- **Капитал:** 17.2 млрд $
- **Индустрия:** Energy
- **Страна:** United States

---

##  Возможные проблемы и решения

### Проблема: "Файл Forbes.csv не найден"
**Решение:** Убедитесь, что CSV-файл находится в корне проекта (рядом с папкой `src`)

### Проблема: "ClassNotFoundException: org.sqlite.JDBC"
**Решение:** Добавьте библиотеку sqlite-jdbc в проект через Project Structure

### Проблема: Задание 3 не находит данные
**Решение:** Это было исправлено добавлением `TRIM()` в SQL-запросах для удаления лишних пробелов

### Проблема: График не отображается
**Решение:** Убедитесь, что библиотеки jfreechart и jcommon правильно подключены

---

##  Автор

**Вариант:** 9  
**Таблица:** Forbes  
**Файл данных:** Forbes.csv

---

## Заметки

- Проект разработан в **IntelliJ IDEA**
- Использует **Java 8+**
- База данных **SQLite** создается автоматически
- Все данные корректно обрабатываются с учетом пробелов и специальных символов
- Программа выполняет все требования задания

---

## Выводы

Проект успешно демонстрирует:
- Работу с файлами CSV
- Парсинг и обработку данных
- Работу с базой данных SQLite
- SQL-запросы (SELECT, GROUP BY, ORDER BY, LIMIT)
- Визуализацию данных с помощью графиков
- ООП-подход (разделение на классы)
- Обработку ошибок

Все три задания выполнены в полном объеме! ✅